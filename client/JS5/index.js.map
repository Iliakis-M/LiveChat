{"version":3,"sources":["../JS/index.js"],"names":["text","shift","area","send","scroll","prefix","window","nick","getCookie","Math","round","random","prompt","test","drop","line","t","split","join","dropGet","msg","value","startsWith","command","trim","sendMessage","load","console","log","document","getElementById","auth","setCookie","sock","on","message","once","data","i","pop","innerHTML","info","connected","disconnected","user","p","createElement","appendChild","scrollBy","shiftcheck","event","down","key","submit","sanitize","replace","parseCookies","cookies","cookie","Map","map","c","storeCookies","Array","from","a","tmp","set","get","addEventListener"],"mappings":"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","sourcesContent":["ï»¿\"use strict\";\r\n\r\nlet text: object = {\r\n\tshift: false,\r\n\tarea: null,\r\n\tsend: null\r\n},\r\n\tscroll = 100;\r\n\r\nconst prefix: string = \"!!\";\r\n\r\nwindow.nick = getCookie(\"user\") || \"guest_\" + Math.round(Math.random() * 1e5);\r\n\r\nwhile (!(nick = prompt(\"Insert a Nickname:\", nick || getCookie(\"user\"))) || !/^[a-zA-Z0-9_\\-();' ]+$/i.test(nick)) { }\r\n\r\nfunction drop(line: number, t: number = 1): string {\r\n\tline = line.split(' ');\r\n\twhile (t--) {\r\n\t\tline.shift();\r\n\t}\r\n\treturn line.join(' ');\r\n} //drop\r\n\r\nfunction dropGet(line: number, t: number = 0): string {\r\n\tline = line.split(' ');\r\n\twhile (t--) {\r\n\t\tline.shift();\r\n\t}\r\n\treturn line.shift();\r\n} //dropGet\r\n\r\nfunction send(msg: string = text.send.value): void {\r\n\ttext.send.value = '';\r\n\tif (msg.startsWith(prefix)) {\r\n\t\treturn command(msg);\r\n\t}\r\n\tmsg = msg.trim();\r\n\tsendMessage(msg);\r\n\ttext.send.value = '';\r\n} //send\r\n\r\nfunction load(e?: object): void {\r\n\tconsole.log(\"Index loaded\");\r\n\r\n\ttext.area = document.getElementById(\"msgarea\");\r\n\ttext.send = document.getElementById(\"txtarea\");\r\n\r\n\tauth(nick);\r\n\tsetCookie(\"user\", nick);\r\n\t\r\n\tsock.on(\"message\", (msg: string, nick: string): void => {\r\n\t\tmessage(msg, nick);\r\n\t});\r\n\tsock.once(\"history\", (...data: string[]): void => {\r\n\t\tfor (let i of data) {\r\n\t\t\tmessage(i.pop(), i.pop());\r\n\t\t}\r\n\t});\r\n\tsock.once(\"connect\", (): void => {\r\n\t\ttext.area.innerHTML = '';\r\n\t\tmessage(\"This is a Beta version of a chatting service, upcoming features are: profile picture support, message history view, spam defense, multiple chatrooms and more security!\", \"<font color='red'><b>SYSTEM</b></font>\");\r\n\t\tmessage(\"<u>Please be kind and don't spam, we have means of banning aggitators.</u>\", \"<font color='red'><b>SYSTEM</b></font>\");\r\n\t\tconsole.info(\"The prefix is !!, type !!help in chat for commands.\");\r\n\t});\r\n} //load\r\n\r\nfunction sendMessage(msg: string): void {\r\n\tif (!msg) {\r\n\t\tmessage(\"<font color='red'><b>You cannot send an empty message!</b></font>\", \"<font color='red'><b>SYSTEM</b></font>\");\r\n\t} else if (sock.connected && !sock.disconnected) {\r\n\t\tsock.send(msg);\r\n\t} else {\r\n\t\tmessage(\"<font color='red'><b>You cannot send messages while disconnected!</b></font>\", \"<font color='red'><b>SYSTEM</b></font>\");\r\n\t}\r\n} //sendMessage\r\n\r\nfunction message(msg: string, user: string): void {\r\n\tlet p = document.createElement(\"p\");\r\n\tp.innerHTML = `<b>${user}:</b> ${msg}<br />`;\r\n\t\r\n\ttext.area.appendChild(p);\r\n\tif (text.area.scrollBy) {\r\n\t\ttext.area.scrollBy(0, scroll);\r\n\t}\r\n} //message\r\n\r\nfunction shiftcheck(event: object, down: boolean = true): void {\r\n\tif (event.key == \"Shift\") {\r\n\t\ttext.shift = down;\r\n\t}\r\n\tif (event.key == \"Enter\" && !text.shift && !down) {\r\n\t\tsend();\r\n\t}\r\n} //shiftcheck\r\n\r\nfunction submit(e?: object): void {\r\n\ttext.shift = false;\r\n\tshiftcheck({\r\n\t\tkey: \"Enter\"\r\n\t}, false);\r\n} //submit\r\n\r\nfunction sanitize(msg: string): string {\r\n\tmsg = msg.replace(/&/gmi, \"&amp;\")\r\n\t\t.replace(/</gmi, \"&lt;\")\r\n\t\t.replace(/>/gmi, \"&gt;\")\r\n\t\t.replace(/\"/gmi, \"&quot;\")\r\n\t\t.replace(/'/gmi, \"&#039;\");\r\n\treturn msg;\r\n} //sanitize\r\n\r\nfunction parseCookies(cookies: string = document.cookie): Map {\r\n\treturn new Map(cookies.split(';').map(c => c.split('=')));\r\n} //parseCookies\r\n\r\nfunction storeCookies(map: Map): string {\r\n\treturn document.cookie = Array.from(map).map(a => a.join('=')).join(';');\r\n} //storeCookies\r\n\r\nfunction setCookie(key: string, value: string): string {\r\n\tlet tmp = parseCookies();\r\n\ttmp.set(key, value);\r\n\treturn storeCookies(tmp);\r\n} //setCookie\r\n\r\nfunction getCookie(key: string): string {\r\n\tlet tmp: Map = parseCookies();\r\n\treturn tmp.get(key);\r\n} //getCookie\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", load);\r\n"],"file":"index.js"}